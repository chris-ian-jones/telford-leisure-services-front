<div class="main-container">
  <div class="body-container">
    <div class="two-thirds-container">
      @if (errorSummary.length > 0) {
        <div #errorSummaryDiv class="error-summary-container" tabindex="2">
          <h2 class="error-summary-title">There is a problem</h2>
          <ul class="error-summary-list">
            @if (
              passwordForm.get('password').errors &&
              passwordForm.get('password').hasError('required')
            ) {
              <li>
                <a
                  href="javascript:void(0)"
                  (click)="focusElement('password')"
                  class="error-link"
                  tabindex="3"
                >
                  Enter your password
                </a>
              </li>
            }
            @if (
              passwordForm.get('password').errors &&
              passwordForm.get('password').hasError('minlength')
            ) {
              <li>
                <a
                  href="javascript:void(0)"
                  (click)="focusElement('password')"
                  class="error-link"
                  tabindex="3"
                >
                  Password must be 8 characters or more
                </a>
              </li>
            }
            @if (
              passwordForm.get('password').errors &&
              passwordForm.get('password').hasError('pattern')
            ) {
              <li>
                <a
                  href="javascript:void(0)"
                  (click)="focusElement('password')"
                  class="error-link"
                  tabindex="3"
                >
                  Password must be in the correct format which contains at least
                  one capital letter, one lower case letter, one number and one
                  symbol (eg ?!£%)
                </a>
              </li>
            }
            @if (
              passwordForm.get('password').errors &&
              passwordForm.get('password').hasError('token')
            ) {
              <li>
                <a
                  (click)="reloadCurrentRoute()"
                  class="error-link"
                  tabindex="3"
                >
                  Confirmation code has expired. Click this link to go back and
                  generate a new one
                </a>
              </li>
            }
            @if (
              passwordForm.get('confirmPassword').errors &&
              passwordForm.get('confirmPassword').hasError('required')
            ) {
              <li>
                <a
                  href="javascript:void(0)"
                  (click)="focusElement('confirmPassword')"
                  class="error-link"
                  tabindex="3"
                >
                  Confirm your password
                </a>
              </li>
            }
            @if (
              passwordForm.get('confirmPassword').errors &&
              passwordForm.get('confirmPassword').hasError('match')
            ) {
              <li>
                <a
                  href="javascript:void(0)"
                  (click)="focusElement('confirmPassword')"
                  class="error-link"
                  tabindex="3"
                >
                  Confirm password and password should match
                </a>
              </li>
            }
          </ul>
        </div>
      }
      <h1 class="title-with-hint">Create a password you will remember</h1>
      <p class="title-hint-text">Your password must have:</p>
      <ul class="hint-bullet-container">
        <li class="hint-bullet">at least 8 characters</li>
        <li class="hint-bullet">at least one symbol (eg ?!£%)</li>
        <li class="hint-bullet">at least one capital letter</li>
        <li class="hint-bullet">at least one lower case letter</li>
        <li class="hint-bullet">at least one number</li>
      </ul>
      <form
        class="question-form-container"
        [formGroup]="passwordForm"
        (ngSubmit)="onClickContinue()"
      >
        <div
          class="default-input-container"
          [class.input-container-error]="
            (passwordForm.get('password').errors ||
              passwordForm.get('password').hasError('required')) &&
            this.errorSummary.length > 0
          "
        >
          <label for="password" class="default-input-label"> Password </label>
          @if (
            passwordForm.get('password').errors &&
            passwordForm.get('password').hasError('required') &&
            this.errorSummary.length > 0
          ) {
            <label for="password" class="input-label-error-message">
              Enter your password
            </label>
          }
          @if (
            passwordForm.get('password').errors &&
            passwordForm.get('password').hasError('minlength') &&
            this.errorSummary.length > 0
          ) {
            <label for="password" class="input-label-error-message">
              Password must be 8 characters or more
            </label>
          }
          @if (
            passwordForm.get('password').errors &&
            passwordForm.get('password').hasError('pattern') &&
            this.errorSummary.length > 0
          ) {
            <label for="password" class="input-label-error-message">
              Password must be in the correct format which contains at least one
              capital letter, one lower case letter, one number and one symbol
              (eg ?!£%)
            </label>
          }
          <div>
            <input
              id="password"
              formControlName="password"
              type="password"
              class="default-text-input"
              [class.text-input-error]="
                passwordForm.get('password').errors &&
                this.errorSummary.length > 0
              "
            />
          </div>
        </div>
        <div
          class="default-input-container"
          [class.input-container-error]="
            (passwordForm.get('confirmPassword').errors ||
              passwordForm.get('confirmPassword').hasError('required')) &&
            this.errorSummary.length > 0
          "
        >
          <label for="confirmPassword" class="default-input-label">
            Confirm your password
          </label>
          @if (
            passwordForm.get('confirmPassword').errors &&
            passwordForm.get('confirmPassword').hasError('required') &&
            this.errorSummary.length > 0
          ) {
            <label for="confirmPassword" class="input-label-error-message">
              Confirm your password
            </label>
          }
          @if (
            passwordForm.get('confirmPassword').errors &&
            passwordForm.get('confirmPassword').hasError('match') &&
            this.errorSummary.length > 0
          ) {
            <label for="confirmPassword" class="input-label-error-message">
              Confirm password and password should match
            </label>
          }
          <div>
            <input
              id="confirmPassword"
              formControlName="confirmPassword"
              type="password"
              class="default-text-input"
              [class.text-input-error]="
                passwordForm.get('confirmPassword').errors &&
                this.errorSummary.length > 0
              "
            />
          </div>
        </div>
        <div>
          <button class="default-btn" type="submit">Continue</button>
        </div>
      </form>
    </div>
  </div>
</div>
